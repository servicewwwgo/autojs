# 调试指南

## 常见问题解决

### 1. "Cannot read properties of undefined (reading 'success')" 错误

这个错误通常表示popup和content script之间的消息通信失败。

#### 解决步骤：

1. **检查扩展是否正确加载**
   - 打开Chrome扩展管理页面 (`chrome://extensions/`)
   - 确保扩展已启用且没有错误
   - 检查扩展ID是否正确

2. **检查Content Script是否加载**
   - 打开目标网页
   - 按F12打开开发者工具
   - 查看Console标签页是否有"Web爬虫系统已加载"消息
   - 如果没有，说明content script没有正确注入

3. **检查页面权限**
   - 确保目标页面允许脚本注入
   - 某些页面（如chrome://、chrome-extension://）不允许content script运行

4. **使用测试连接功能**
   - 在popup中点击"测试连接"按钮
   - 查看日志输出，确认连接状态

### 2. Content Script未加载

#### 可能原因：
- 页面不允许脚本注入
- 扩展权限不足
- 页面加载时机问题

#### 解决方法：
1. 刷新页面重试
2. 检查扩展权限设置
3. 尝试在其他页面测试

### 3. 消息通信失败

#### 调试步骤：
1. 打开开发者工具
2. 查看Console中的错误信息
3. 检查Network标签页是否有相关请求
4. 使用"测试连接"功能验证通信

### 4. 指令执行失败

#### 常见原因：
- JSON格式错误
- 元素选择器不正确
- 页面元素未加载完成
- 权限不足

#### 解决方法：
1. 验证JSON格式
2. 检查元素选择器
3. 添加等待指令
4. 检查页面权限

## 调试工具

### 1. Chrome开发者工具
- **Console**: 查看日志和错误信息
- **Network**: 监控网络请求
- **Elements**: 检查页面元素
- **Sources**: 调试JavaScript代码

### 2. 扩展调试
- **扩展管理页面**: 检查扩展状态
- **检查视图**: 调试popup和content script
- **重新加载**: 重新加载扩展

### 3. 日志分析
- 查看popup中的执行日志
- 检查Console中的详细错误信息
- 使用"测试连接"功能验证通信

## 故障排除清单

- [ ] 扩展是否正确安装和启用
- [ ] Content script是否在目标页面加载
- [ ] 页面是否允许脚本注入
- [ ] JSON指令格式是否正确
- [ ] 元素选择器是否有效
- [ ] 是否有足够的页面权限
- [ ] 网络连接是否正常

## 联系支持

如果问题仍然存在，请提供：
1. 错误日志截图
2. 使用的指令配置
3. 目标网站URL
4. Chrome版本信息
5. 扩展版本信息
